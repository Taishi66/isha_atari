import{r as o}from"./vendor-ppAWL3zK.js";const i=(n,e="output")=>({id:`line_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,content:n,type:e,timestamp:new Date}),F=[i("[CYBERNETIC NODE] ⇢ Portfolio Shell v3.7","system"),i("[NEURAL LINK] Establishing encrypted channel...","system"),i("[AUTH] Biometrics spoofed • Access level: VISITOR","success"),i("[CORE] Spinning up modules → UI_RENDERER • STATE_MANAGER • SIGNAL_GRID","system"),i("[MEMORY] Syncing case files and mission logs","system"),i("[STATUS] Systems nominal • Latency 0.42ms • Power 99%","success"),i("","output"),i("Tap 'help' to list directives or 'ls' to surface directories.","info"),i("","output")],f={},N=n=>{const e=n.trim();if(!e)return{lines:[i("")],shouldClose:!1,shouldClear:!1,exitCode:0};const[c,...m]=e.toLowerCase().split(/\s+/);let s=f[c];if(s||(s=Object.values(f).find(d=>d.aliases.includes(c))),s)try{return s.execute(m)}catch(d){return{lines:[i(`Error executing command: ${d.message}`,"error"),i("")],shouldClose:!1,shouldClear:!1,exitCode:1}}const p=Object.keys(f).filter(d=>d.startsWith(c.substring(0,2))).slice(0,3),x=p.length>0?`Did you mean: ${p.join(", ")}?`:"Type 'help' to see available commands";return{lines:[i(`Command not found: ${c}`,"error"),i(x,"info"),i("")],shouldClose:!1,shouldClear:!1,exitCode:127}},C=n=>{const e="font-mono text-sm leading-relaxed animate-in fade-in duration-300";switch(n.type){case"command":return`${e} text-[#00D9FF] font-medium`;case"system":return`${e} text-[#00D9FF] font-bold`;case"separator":return`${e} text-[#00D9FF]/60`;case"error":return`${e} text-red-400 font-medium`;case"warning":return`${e} text-orange-400`;case"success":return`${e} text-green-400`;case"info":return`${e} text-[#00D9FF]/80`;case"output":default:return`${e} text-[#FFFFFF]`}};function A(){return o.useCallback((n,e)=>{console.error("Error:",n,e)},[])}function R(n,e){switch(e.type){case"INITIALIZE":return{...n,lines:e.payload.lines,currentInput:"",historyIndex:-1};case"ADD_LINES":return{...n,lines:[...n.lines,...e.payload.lines]};case"CLEAR_TERMINAL":return{...n,lines:[]};case"SET_INPUT":return{...n,currentInput:e.payload.input};case"ADD_TO_HISTORY":{const c=[...n.commandHistory,e.payload.command];return{...n,commandHistory:c.slice(-50),historyIndex:-1}}case"SET_HISTORY_INDEX":return{...n,historyIndex:e.payload.index};case"TOGGLE_MAXIMIZE":return{...n,isMaximized:!n.isMaximized};case"SET_MAXIMIZE":return{...n,isMaximized:e.payload.isMaximized};default:return n}}const L=({isOpen:n,onClose:e,enableAutoComplete:c=!0})=>{const[m,s]=o.useReducer(R,{lines:[],isMaximized:!1,currentInput:"",commandHistory:[],historyIndex:-1}),p=o.useRef(null),x=o.useRef(null),d=o.useRef(m),u=A();o.useEffect(()=>{d.current=m},[m]);const h=o.useMemo(()=>["test","help","clear","about","skills","contact","projects","exit","whoami","ls","pwd","cat","cd","echo","history","uname","sudo","man"],[]),y=o.useCallback(t=>{if(t.trim())try{s({type:"ADD_TO_HISTORY",payload:{command:t}});const r={id:`cmd_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,content:`$ ${t}`,type:"command",timestamp:new Date},a=N(t);if(a.shouldClose){setTimeout(e,500);return}if(a.shouldClear){s({type:"CLEAR_TERMINAL"});return}const l=a.lines.map((_,S)=>({..._,id:_.id||`line_${Date.now()}_${S}`}));s({type:"ADD_LINES",payload:{lines:[r,...l]}})}catch(r){u(r,{context:"command_execution",command:t});const a={id:`error_${Date.now()}`,content:`Error: ${r.message}`,type:"error",timestamp:new Date};s({type:"ADD_LINES",payload:{lines:[a]}})}},[e,u]);o.useEffect(()=>{if(x.current&&m.lines.length>0){const t=x.current;requestAnimationFrame(()=>{t.scrollTo({top:t.scrollHeight,behavior:"smooth"})})}},[m.lines.length]),o.useEffect(()=>{if(n)try{s({type:"INITIALIZE",payload:{lines:F}}),s({type:"SET_MAXIMIZE",payload:{isMaximized:!1}});const t=setTimeout(()=>{p.current?.focus()},150);return()=>clearTimeout(t)}catch(t){u(t,{context:"terminal_initialization"});return}},[n,u]);const I=o.useCallback(t=>{try{const r=d.current;switch(t.key){case"Enter":t.preventDefault(),y(r.currentInput),s({type:"SET_INPUT",payload:{input:""}});break;case"ArrowUp":{if(t.preventDefault(),r.commandHistory.length>0){const a=Math.min(r.historyIndex+1,r.commandHistory.length-1),l=r.commandHistory[r.commandHistory.length-1-a]||"";s({type:"SET_HISTORY_INDEX",payload:{index:a}}),s({type:"SET_INPUT",payload:{input:l}})}break}case"ArrowDown":{if(t.preventDefault(),r.historyIndex>0){const a=r.historyIndex-1,l=r.commandHistory[r.commandHistory.length-1-a]||"";s({type:"SET_HISTORY_INDEX",payload:{index:a}}),s({type:"SET_INPUT",payload:{input:l}})}else r.historyIndex===0&&(s({type:"SET_HISTORY_INDEX",payload:{index:-1}}),s({type:"SET_INPUT",payload:{input:""}}));break}case"Tab":{if(t.preventDefault(),c){const a=h.filter(l=>l.startsWith(r.currentInput.toLowerCase()));if(a.length===1)s({type:"SET_INPUT",payload:{input:a[0]||""}});else if(a.length>1){const l={id:`completion_${Date.now()}`,content:`Available: ${a.join(", ")}`,type:"info",timestamp:new Date};s({type:"ADD_LINES",payload:{lines:[l]}})}}break}case"Escape":t.preventDefault(),e();break;case"l":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),s({type:"CLEAR_TERMINAL"}));break;case"c":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),s({type:"SET_INPUT",payload:{input:""}}));break}}catch(r){u(r,{context:"keyboard_handler",key:t.key})}},[y,e,c,h,u]),E=o.useCallback(()=>{s({type:"TOGGLE_MAXIMIZE"})},[]),b=o.useCallback(()=>{s({type:"CLEAR_TERMINAL"})},[]),T=o.useCallback(t=>{s({type:"SET_INPUT",payload:{input:t}})},[]),g=o.useMemo(()=>({executeCommand:y,clearTerminal:b,toggleMaximize:E,updateInput:T}),[y,b,E,T]),w=o.useMemo(()=>({inputRef:p,outputRef:x}),[]),D=o.useMemo(()=>({handleKeyDown:I}),[I]);return{state:m,actions:g,refs:w,handlers:D}},M={overlay:{base:"fixed inset-0 z-50 transition-all duration-700 ease-out",open:"opacity-100 backdrop-blur-sm bg-black/50",closed:"opacity-0 pointer-events-none",normal:"flex items-center justify-center p-1 xs:p-2 sm:p-3 md:p-4",maximized:"p-0"},window:{base:`
      relative bg-black border-[#00D9FF]/50 overflow-hidden
      font-mono shadow-2xl shadow-[#00D9FF]/20 flex flex-col
      transition-all duration-800 cubic-bezier(0.16, 1, 0.3, 1)
    `,open:"opacity-100 transform-none",closed:"opacity-0 pointer-events-none transform scale-95",normal:`w-[98vw] xs:w-[95vw] sm:w-[90vw] md:w-4/5 lg:w-3/4 max-w-4xl
             h-[95vh] xs:h-[92vh] sm:h-[85vh] md:h-3/4
             max-h-[500px] xs:max-h-[550px] sm:max-h-[600px] md:max-h-[650px]
             min-h-[280px] xs:min-h-[320px] sm:min-h-[380px] md:min-h-[400px]
             transition-all duration-800 cubic-bezier(0.16, 1, 0.3, 1)
             hover:shadow-[0_0_30px_rgba(0,217,255,0.3)]`,maximized:`w-screen h-screen max-w-none max-h-none min-h-screen
                transition-all duration-800 cubic-bezier(0.16, 1, 0.3, 1)
                shadow-[0_0_50px_rgba(0,217,255,0.4)]`},header:{container:"flex items-center justify-between px-2 xs:px-3 sm:px-4 py-2 xs:py-2 sm:py-3 bg-gray-900/90 border-b border-[#00D9FF]/30 flex-shrink-0",leftSection:"flex items-center space-x-2 xs:space-x-2 sm:space-x-3",title:"text-[#00D9FF] text-xs xs:text-sm sm:text-base font-mono font-semibold"},content:{container:"relative flex flex-col h-full min-h-0",output:"flex-1 p-2 xs:p-3 sm:p-4 md:p-5 overflow-y-auto bg-black/90 min-h-0 relative",outputInner:"space-y-1 text-xs xs:text-xs sm:text-sm md:text-base relative z-10",input:{container:"flex-shrink-0 px-2 xs:px-3 sm:px-4 py-2 xs:py-2 sm:py-3 border-t border-[#00D9FF]/30 bg-gray-900/30 relative z-10",wrapper:"flex items-center space-x-2 text-xs xs:text-xs sm:text-sm md:text-base",field:"flex-1 bg-transparent text-[#FFFFFF] outline-none font-mono placeholder:text-[#FFFFFF]/60 focus:ring-0 focus:border-none min-w-0 text-xs xs:text-xs sm:text-sm md:text-base"}}},k=(...n)=>n.filter(Boolean).join(" ").replace(/\s+/g," ").trim();export{M as T,k as c,C as g,L as u};
